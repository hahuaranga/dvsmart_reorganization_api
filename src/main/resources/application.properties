# ============================================================================
# APPLICATION CONFIGURATION
# ============================================================================
spring.application.name=dvsmart-reorganization-api
server.servlet.context-path=/dvsmart-reorganization-api
server.port=8080
server.shutdown=graceful

# ============================================================================
# MONGODB CONFIGURATION
# ============================================================================
#spring.mongodb.uri=mongodb://dvsmart_user:eoQQqfTyMd@dvsmart-catalog-mongodb.dvsmart.svc.cluster.local:27017/dvsmart-ms?authSource=dvsmart-ms
spring.mongodb.uri=mongodb://dvsmart_user:eoQQqfTyMd@localhost:30000/dvsmart-ms?authSource=dvsmart-ms
mongo.files-index=files_index

# PostgreSQL Database (para Spring Batch)
#spring.datasource.url=jdbc:postgresql://dvsmart-batch-postgresql.dvsmart.svc.cluster.local:5432/dvsmart
spring.datasource.url=jdbc:postgresql://localhost:30005/dvsmart
spring.datasource.driver-class-name=org.postgresql.Driver
spring.datasource.username=dvsmart_ms
spring.datasource.password=OgxjdNEeQl
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5

# ============================================================================
# SPRING BATCH CONFIGURATION
# ============================================================================
# Deshabilitar inicio automatico de jobs al arrancar la aplicacion
spring.batch.job.enabled=false
spring.batch.jdbc.initialize-schema=always

# ============================================================================
# BATCH CUSTOM PROPERTIES (BatchConfigProperties)
# ============================================================================
# Tamaño del chunk para procesamiento por lotes
# Cada chunk procesa este numero de registros antes de commit
batch.chunk-size=1000

# Tamaño del pool de threads para procesamiento asincrono
# Mas threads = mas procesamiento paralelo (balance con recursos del servidor)
batch.thread-pool-size=20

# Capacidad de la cola de tareas pendientes
# Si hay mas tareas que threads, se encolan aqui
batch.queue-capacity=500

batch.skip-limit=5

batch.retry-limit=3

# ============================================================================
# SFTP ORIGIN CONFIGURATION (SftpConfigProperties.Origin)
# ============================================================================
# Servidor SFTP de origen (donde estan los archivos actuales)
#sftp.origin.host=dvsmart-source-filesystem-sftp.dvsmart.svc.cluster.local
sftp.origin.host=localhost
#sftp.origin.port=22
sftp.origin.port=30002
sftp.origin.user=sftpsourceuser
sftp.origin.password=securepass

# Directorio base en el servidor origen
sftp.origin.base-dir=/disorganized_data

# Timeout de conexion en milisegundos (30 segundos)
sftp.origin.timeout=30000

# Tamanio del pool de conexiones SFTP origen
# Mas conexiones = mas operaciones simultaneas de lectura
sftp.origin.pool.size=25

# ============================================================================
# SFTP DESTINATION CONFIGURATION (SftpConfigProperties.Destination)
# ============================================================================
# Servidor SFTP de destino (donde se reorganizaran los archivos)
#sftp.dest.host=dvsmart-destination-filesystem-sftp.dvsmart.svc.cluster.local
sftp.dest.host=localhost
#sftp.dest.port=30001
sftp.dest.port=22
sftp.dest.user=sftpdestinationuser
sftp.dest.password=securepass

# Directorio base en el servidor destino
# Los archivos se crearan bajo: {base-dir}/{hash-partition}/{filename}
# Ejemplo: /data/reorganized/a1/b2/c3/archivo.txt
sftp.dest.base-dir=/organized_data

# Timeout de conexion en milisegundos (30 segundos)
sftp.dest.timeout=30000

# Tamaño del pool de conexiones SFTP destino
# Mas conexiones = mas operaciones simultaneas de escritura
sftp.dest.pool.size=25

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================
# Nivel de log general
logging.level.root=INFO

# Logs de la aplicacion (ajustar segun necesidad)
logging.level.com.indra.minsait.dvsmart.reorganization=DEBUG

# Logs de Spring Batch (INFO para produccion, DEBUG para desarrollo)
logging.level.org.springframework.batch=INFO

# Logs de Spring Integration SFTP (DEBUG para troubleshooting)
logging.level.org.springframework.integration.sftp=DEBUG

# Logs de MongoDB
logging.level.org.springframework.data.mongodb=INFO

# Patron de log para consola
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %logger{36} - %msg%n

# Logging especifico para ShedLock
logging.level.net.javacrumbs.shedlock=DEBUG

# ============================================================================
# ACTUATOR CONFIGURATION (Monitoring & Health)
# ============================================================================
# Exponer endpoints de actuator
management.endpoints.web.exposure.include=health,info,metrics,batch

# Mostrar detalles del health check
management.endpoint.health.show-details=always

# Habilitar metricas de JVM, proceso y sistema
management.metrics.enable.jvm=true
management.metrics.enable.process=true
management.metrics.enable.system=true